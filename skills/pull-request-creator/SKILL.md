---
name: pull-request-creator
description: pullリクエストを作成するための手順。ユーザーが「pullリクエストを作成して」などと依頼したときに使う。現状ブランチの変更確認、概要整理、PR本文作成、developへのPR作成までをガイドする。
metadata:
  short-description: Create a pull request
---

# Pull Request Creator

## 目的

ユーザーが「pullリクエストを作成して」と頼んだ際に、現在のブランチの変更内容を整理し、PR本文（概要・変更内容・確認事項など）を作成し、develop向けのPR作成までを案内する。

## 進め方

### 1. 現在のブランチと差分を確認

- `git status` で未コミット変更の有無を確認
- `git branch --show-current` で現在ブランチ名を確認
- `git log --oneline -n 20` で最近のコミットを確認
- `git diff develop...HEAD` でdevelopとの差分概要を把握
- 必要なら `git diff --stat develop...HEAD` でファイル単位の変更量を確認

### 2. 変更内容の要約を作成

以下を整理して「誰が読んでも変更点が追える」粒度でまとめる:

- 目的（なぜこの変更が必要か）
- 主要な変更カテゴリ（例: 依存更新 / 機能追加 / リファクタ / 修正 / 削除）
- 変更点の詳細（カテゴリごとに箇条書き）
  - 追加・削除したファイルやモジュール名
  - 変更した挙動や入出力の差分
  - 影響する機能名・API・ジョブなどの具体名
- 影響範囲・注意点（破壊的変更や互換性、設定変更の有無）

必要に応じて:

- 差分の「要点3つ」だけ先に書いてから詳細を続ける
- 依存更新は「主要パッケージ名 + 旧→新バージョン」を列挙
  - 例: `langchain 0.1.x → 0.2.x`

### 3. PR本文を作成（詳細版）

テンプレート（必要に応じて調整）:

```
## 概要
-

## 変更内容
-
-
-

## 影響範囲 / 注意点
-
-

## 重要な変更のコード抜粋
- `ファイル:行` の形で参照し、5〜20行程度の抜粋を貼る
- 変更前後の差分が分かるようにコメントで意図を添える
- 例:
  - `src/foo/bar.py:120`
  - 変更理由: 例外処理の追加により安定性を向上
  - 抜粋:
    ```python
    # before
    ...
    # after
    ...
    ```
```

### 4. PR本文の確認（ユーザー承認）

- 作成したタイトル/本文をユーザーに提示し、内容確認を必ず行う
- 修正依頼があれば反映して再提示
- **ユーザーのOKが出るまでPR作成を実行しない**

### 5. PRを作成（develop向け）

- base: develop
- compare: 現在ブランチ
- タイトル: 日本語で、変更の要点が分かる短い文
- 本文: 作成したPR本文

作成方法はユーザーの環境に合わせる:
- GitHub CLI を使う場合: `gh pr create` を利用
  - 事前に `git push -u origin <現在ブランチ>` が必要

## 追加の確認

- PR作成前にコミット漏れがないか再確認
- CIやテスト結果が必要なら案内

## 注意

- 既存のPRテンプレートがリポジトリにある場合はそれを優先
- リポジトリ独自ルール（ラベル、レビューア、テンプレ記法）があれば従う
